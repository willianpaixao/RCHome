<?xml version="1.0" encoding="UTF-8"?>

<project name="RCHome" default="build" basedir="..">
	<description>
		RCHome- For more moderns homes
	</description>

	<!-- Specifying paths, where is and where will be? -->
	<property name="build" location="build"/>
	<property name="classes" location="${build}/classes"/>
	<property name="debuglevel" value="source,lines,vars"/>
	<property name="lib" location="lib"/>
	<property name="src" location="src"/>
	<property name="version" value="0.01"/>

	<!-- Default target. Build all source code, including documentation -->
	<target name="build" depends="build-server,build-client,build-doc" description="compile all source code and documentation"/>

	<target name="build-server" description="compile the server side">
		<mkdir dir="${classes}"/>
		<javac debug="true" debuglevel="${debuglevel}" srcdir="${src}/rchome/java/server" destdir="${classes}" includeantruntime="false"/>
		<jar jarfile="${build}/RCHome-server_${version}.jar" basedir="${classes}">
			<manifest>
				<attribute name="Manifest-Version" value="0.01"/>
				<attribute name="Created-By" value="MÃ´nica Nelly and Willian Paixao"/>
				<attribute name="Main-Class" value="rchome/java/server/Server"/>
				<attribute name="Class-Path" value="${lib}/RXTXcomm.jar"/>
			</manifest>
		</jar>
	</target>

	<target name="build-client" description="compile the client-side">
		<mkdir dir="${classes}"/>
		<javac debug="true" debuglevel="${debuglevel}" srcdir="${src}/rchome/java/client" destdir="${classes}" includeantruntime="false"/>
		<jar jarfile="${build}/RCHome-client_${version}.jar" basedir="${classes}">
			<manifest>
				<attribute name="Manifest-Version" value="0.01"/>
				<attribute name="Created-By" value="Monica Nelly and Willian Paixao"/>
				<attribute name="Main-Class" value="rchome/java/client/ClientApplication"/>
			</manifest>
	</jar>
	</target>

	<target name="build-doc" description="generate the javadoc documentation for developers">
		<mkdir dir="${build}/doc/devel/api"/>
		<javadoc
			access="public"
			author="true"
			charset="UTF-8"
			destdir="${build}/doc/devel/api"
			packagenames="rchome.java.*"
			sourcepath="${src}"
			use="true"
			verbose="true"
			version="true"
			windowtitle="RCHome API">
		</javadoc>
	</target>

	<!-- Default target for clean up thhe source code and jars -->
	<target name="clean" depends="clean-server,clean-client,clean-doc"/>

	<target name="clean-server">
		<delete dir="${classes}/server"/>
		<delete file="${build}/RCHome-server_${version}.jar"/>
	</target>

	<target name="clean-client">
		<delete dir="${classes}/client"/>
		<delete file="${build}/RCHome-client_${version}.jar"/>
	</target>

	<target name="clean-doc">
		<delete dir="${build}/doc"/>
	</target>
</project>